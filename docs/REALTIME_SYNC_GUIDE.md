# Chat Copilot Platform - Real-Time Synchronization Guide\n\n## üéØ Overview\n\nThe real-time synchronization system allows you to develop on one server while automatically keeping the backup server (with more GPU RAM) updated in real-time. This enables seamless switching between servers and ensures your work is always backed up.\n\n## üñ•Ô∏è Server Configuration\n\n- **Source Server**: `192.168.0.1` (ubuntuaicodeserver) - Development machine\n- **Backup Server**: `192.168.0.5` (ubuntuaicodeserver-2) - High GPU RAM machine\n- **Sync Direction**: Source ‚Üí Backup (real-time)\n- **User**: `keith` ‚Üí `keith-ransom`\n\n## üöÄ Quick Start\n\n### **Option 1: Interactive Startup**\n```bash\n# Start real-time sync with guided setup\n./start-realtime-sync.sh\n```\n\n### **Option 2: Direct Commands**\n```bash\n# Start real-time sync\n./scripts/sync/realtime-sync-simple.sh start\n\n# Check status\n./scripts/sync/realtime-sync-simple.sh status\n\n# Monitor activity\n./scripts/sync/realtime-sync-simple.sh monitor\n\n# Stop sync\n./scripts/sync/realtime-sync-simple.sh stop\n```\n\n## üìÅ What Gets Synced\n\n### **Watched Directories**\n- `webapi/` - Backend API code\n- `webapp/` - Frontend web application\n- `scripts/` - Platform scripts\n- `configs/` - Configuration files\n- `docker/` - Docker configurations\n- `docs/` - Documentation\n- `agents/` - AI agents\n- `plugins/` - Platform plugins\n- `tools/` - Development tools\n- `python/` - Python modules\n- `shared/` - Shared resources\n- Root directory files (*.md, *.yml, etc.)\n\n### **File Types Monitored**\n- Source code: `*.py`, `*.js`, `*.ts`, `*.jsx`, `*.tsx`, `*.cs`\n- Configuration: `*.json`, `*.yml`, `*.yaml`, `*.conf`, `*.env`\n- Documentation: `*.md`\n- Scripts: `*.sh`\n- Docker: `Dockerfile*`, `docker-compose*`\n- Service files: `*.service`\n\n### **Excluded from Sync**\n- Log files: `*.log`\n- Temporary files: `*.tmp`, `*.swp`, `*.swo`, `*~`\n- Build artifacts: `*.pyc`, `*.pyo`, `node_modules/`, `build/`, `dist/`\n- Version control: `.git/`\n- Virtual environments: `.venv/`, `venv/`\n- Runtime data: `logs/`, `pids/`, `temp/`, `tmp/`\n\n## üîß Features\n\n### **Real-Time File Watching**\n- Uses `inotify` for instant file change detection\n- Monitors file modifications, creations, deletions, and moves\n- Automatic sync within 1-2 seconds of changes\n\n### **Systemd Services Integration**\n- Automatically syncs `*.service` files to backup server\n- Copies service files to `/etc/systemd/system/` on backup\n- Runs `systemctl daemon-reload` after service updates\n- Maintains service configurations across servers\n\n### **Intelligent Sync**\n- Skips temporary and build files\n- Handles concurrent file changes\n- Limits simultaneous sync operations\n- Comprehensive logging of all activities\n\n### **Error Handling**\n- Automatic retry on failed syncs\n- Connection monitoring\n- Graceful handling of network issues\n- Detailed error logging\n\n## üìä Monitoring and Management\n\n### **Check Sync Status**\n```bash\n./scripts/sync/realtime-sync-simple.sh status\n```\n**Output includes:**\n- Running status and PID\n- CPU and memory usage\n- Recent sync activity\n- Connection status to backup server\n\n### **Live Activity Monitoring**\n```bash\n./scripts/sync/realtime-sync-simple.sh monitor\n```\n**Shows real-time:**\n- File changes detected\n- Sync operations performed\n- Errors and warnings\n- Performance metrics\n\n### **Test Functionality**\n```bash\n./scripts/sync/realtime-sync-simple.sh test\n```\n**Performs:**\n- Creates test file\n- Syncs to backup server\n- Verifies successful transfer\n- Cleans up test files\n\n## üéÆ Development Workflow\n\n### **Typical Usage Pattern**\n\n1. **Start Development Session**\n   ```bash\n   # On source server (192.168.0.1)\n   ./start-realtime-sync.sh\n   ```\n\n2. **Develop Normally**\n   - Edit files in your IDE\n   - Changes sync automatically to backup server\n   - No manual sync needed\n\n3. **Switch to High-GPU Server When Needed**\n   ```bash\n   # Connect to backup server\n   ssh keith-ransom@192.168.0.5\n   cd ~/chat-copilot\n   \n   # Your latest changes are already here!\n   # Run GPU-intensive tasks\n   ./startup-platform.sh\n   ```\n\n4. **Continue Development**\n   - Work on either server\n   - Changes on source sync to backup automatically\n   - Manual sync from backup to source when needed\n\n### **GPU-Intensive Workflows**\n\n```bash\n# Develop on source server (normal workflow)\nvim webapi/Controllers/ChatController.cs\n# ‚Üí Automatically synced to backup server\n\n# Switch to backup server for GPU work\nssh keith-ransom@192.168.0.5\ncd ~/chat-copilot\n\n# Run AI models with high GPU RAM\ndocker-compose up ollama\n# or\n./startup-platform.sh\n\n# Continue development on backup server if needed\nvim webapi/Controllers/ChatController.cs\n# ‚Üí Manually sync back when ready\n```\n\n## üîÑ Manual Sync Operations\n\n### **Full Platform Sync**\n```bash\n# Push everything to backup server\n./scripts/sync/rsync-platform-enhanced.sh push backup-server --include-systemd\n\n# Pull everything from backup server\n./scripts/sync/rsync-platform-enhanced.sh pull backup-server --include-systemd\n\n# Bidirectional sync\n./scripts/sync/rsync-platform-enhanced.sh sync backup-server --include-systemd\n```\n\n### **Systemd Services Only**\n```bash\n# Push systemd services to backup\n./scripts/sync/rsync-systemd-services.sh push backup-server\n\n# Pull systemd services from backup\n./scripts/sync/rsync-systemd-services.sh pull backup-server\n```\n\n## üõ†Ô∏è Advanced Configuration\n\n### **Systemd Service (Auto-Start)**\n\n1. **Install Service**\n   ```bash\n   sudo cp systemd-services/chat-copilot-realtime-sync-simple.service /etc/systemd/system/\n   sudo systemctl daemon-reload\n   sudo systemctl enable chat-copilot-realtime-sync-simple.service\n   ```\n\n2. **Control Service**\n   ```bash\n   sudo systemctl start chat-copilot-realtime-sync-simple\n   sudo systemctl status chat-copilot-realtime-sync-simple\n   sudo systemctl stop chat-copilot-realtime-sync-simple\n   ```\n\n### **Custom Sync Intervals**\n\nEdit the sync script to adjust timing:\n```bash\n# In realtime-sync-simple.sh, modify:\nsleep 1  # Change to desired delay (seconds)\n```\n\n### **Additional Directories**\n\nAdd more directories to watch:\n```bash\n# Edit realtime-sync-simple.sh, add to watch_dirs array:\n\"$PLATFORM_ROOT/your-custom-dir\"\n```\n\n## üìã Log Files and Debugging\n\n### **Log Locations**\n- **Sync Logs**: `logs/sync/realtime-sync-YYYYMMDD_HHMMSS.log`\n- **System Logs**: `journalctl -u chat-copilot-realtime-sync-simple`\n- **PID Files**: `pids/realtime-sync.pid`\n\n### **Debug Commands**\n```bash\n# View recent logs\ntail -f logs/sync/realtime-sync-*.log\n\n# Check system service logs\nsudo journalctl -u chat-copilot-realtime-sync-simple -f\n\n# Monitor file system events\ninotifywait -m -r -e modify,create,delete,move /home/keith/chat-copilot/webapi\n```\n\n## üö® Troubleshooting\n\n### **Common Issues**\n\n#### **Sync Not Starting**\n```bash\n# Check dependencies\nwhich inotifywait\nsudo apt-get install inotify-tools\n\n# Check SSH connection\nssh keith-ransom@192.168.0.5 \"echo 'test'\"\n\n# Check permissions\nls -la scripts/sync/realtime-sync-simple.sh\n```\n\n#### **High CPU Usage**\n```bash\n# Check if too many files are being watched\n./scripts/sync/realtime-sync-simple.sh status\n\n# Reduce watch scope by excluding more directories\n# Edit realtime-sync-simple.sh exclude patterns\n```\n\n#### **Sync Delays**\n```bash\n# Check network latency\nping 192.168.0.5\n\n# Check backup server load\nssh keith-ransom@192.168.0.5 \"top\"\n\n# Monitor sync performance\n./scripts/sync/realtime-sync-simple.sh monitor\n```\n\n#### **Permission Errors**\n```bash\n# Check SSH keys\nssh-add -l\n\n# Test SSH connection\nssh keith-ransom@192.168.0.5 \"whoami\"\n\n# Check sudo access for systemd\nssh keith-ransom@192.168.0.5 \"sudo systemctl --version\"\n```\n\n### **Recovery Procedures**\n\n#### **Restart Sync**\n```bash\n./scripts/sync/realtime-sync-simple.sh stop\nsleep 2\n./scripts/sync/realtime-sync-simple.sh start\n```\n\n#### **Full Resync**\n```bash\n./scripts/sync/realtime-sync-simple.sh stop\n./scripts/sync/rsync-platform-enhanced.sh push backup-server --include-systemd\n./scripts/sync/realtime-sync-simple.sh start\n```\n\n#### **Clean Restart**\n```bash\n# Stop sync\n./scripts/sync/realtime-sync-simple.sh stop\n\n# Clean PID files\nrm -f pids/realtime-sync.pid\n\n# Kill any remaining processes\npkill -f realtime-sync\n\n# Restart\n./scripts/sync/realtime-sync-simple.sh start\n```\n\n## üìä Performance Considerations\n\n### **Resource Usage**\n- **CPU**: Low impact (1-5% during active sync)\n- **Memory**: Minimal (< 100MB)\n- **Network**: Depends on file change frequency\n- **Disk I/O**: Minimal impact on source, moderate on backup\n\n### **Optimization Tips**\n1. **Exclude Large Directories**: Add build/cache directories to exclude patterns\n2. **Limit Concurrent Jobs**: Default is 3 simultaneous syncs\n3. **Adjust Sync Delay**: Increase delay for less frequent but larger batches\n4. **Monitor Network**: Ensure stable connection between servers\n\n## üéØ Use Cases\n\n### **Development Scenarios**\n\n1. **Code Development**\n   - Write code on source server\n   - Test on backup server with high GPU\n   - Seamless switching between environments\n\n2. **AI Model Training**\n   - Develop training scripts on source\n   - Run training on backup server (high GPU RAM)\n   - Monitor and adjust from either server\n\n3. **Documentation Writing**\n   - Write docs on source server\n   - Generate/test on backup server\n   - Automatic backup of all changes\n\n4. **Configuration Management**\n   - Update configs on source\n   - Deploy to backup automatically\n   - Test configurations on high-resource server\n\n### **Team Collaboration**\n\n1. **Shared Development**\n   - Multiple developers can use source server\n   - Backup server serves as shared high-GPU resource\n   - Automatic synchronization ensures consistency\n\n2. **Backup and Recovery**\n   - Continuous backup of all development work\n   - Quick recovery from backup server\n   - No data loss during hardware issues\n\n## üéâ Benefits Summary\n\n### ‚úÖ **Automatic Backup**\n- Real-time backup of all changes\n- No manual intervention required\n- Comprehensive file coverage\n\n### ‚úÖ **Seamless GPU Access**\n- Instant access to high-GPU server\n- No file transfer delays\n- Consistent development environment\n\n### ‚úÖ **Development Efficiency**\n- Work on preferred server\n- Switch for resource-intensive tasks\n- Continuous integration ready\n\n### ‚úÖ **System Integration**\n- Systemd services synchronized\n- Complete platform deployment\n- Service state preservation\n\n### ‚úÖ **Monitoring and Control**\n- Real-time activity monitoring\n- Comprehensive logging\n- Easy start/stop controls\n\n---\n\n## üöÄ **Your real-time sync is now ready!**\n\n**Start developing on the source server and your changes will automatically appear on the backup server with high GPU RAM. Switch between servers seamlessly for the best development experience!**\n\n### **Quick Commands:**\n- `./start-realtime-sync.sh` - Start real-time sync\n- `./scripts/sync/realtime-sync-simple.sh status` - Check status\n- `ssh keith-ransom@192.168.0.5` - Switch to backup server\n- `./scripts/sync/realtime-sync-simple.sh stop` - Stop sync\n\n**Happy coding! üéÆüíª**"