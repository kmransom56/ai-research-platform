<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Research Platform - Control Panel</title>

    <!-- Restaurant NOC Theme -->
    <link rel="stylesheet" href="css/restaurant-noc-theme.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

    <style>
        /* Custom styles for control panel */
        .main-layout {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .hero-section {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
            padding: var(--space-12) 0;
            color: white;
            text-align: center;
        }

        .hero-title {
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: var(--space-4);
            background: linear-gradient(45deg, #ffffff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: var(--text-lg);
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: var(--space-8);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-8);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            text-align: center;
            transition: all var(--transition-normal);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            background: rgba(255, 255, 255, 0.15);
        }

        .stat-number {
            font-size: var(--text-3xl);
            font-weight: 700;
            margin-bottom: var(--space-2);
        }

        .stat-label {
            font-size: var(--text-sm);
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--space-6);
            margin-top: var(--space-8);
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--color-primary);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-4);
            color: white;
            font-size: 24px;
        }

        .feature-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-3);
        }

        .feature-description {
            color: var(--text-secondary);
            margin-bottom: var(--space-6);
            line-height: 1.6;
        }

        .action-buttons {
            display: flex;
            gap: var(--space-3);
            flex-wrap: wrap;
        }

        .theme-toggle {
            position: fixed;
            top: var(--space-4);
            right: var(--space-4);
            z-index: var(--z-fixed);
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--text-primary);
        }

        .theme-toggle:hover {
            background: var(--bg-card-hover);
            transform: scale(1.1);
        }

        /* Enhanced buttons for restaurant NOC theme */
        .btn-restaurant {
            background: linear-gradient(135deg, #0ea5e9, #06b6d4);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-weight: 500;
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .btn-restaurant::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-restaurant:hover::before {
            left: 100%;
        }

        .btn-restaurant:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.3);
        }

        .service-status {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 500;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-online .status-dot {
            background: var(--success);
        }

        .status-offline .status-dot {
            background: var(--error);
        }

        .status-warning .status-dot {
            background: var(--warning);
        }

        /* Logs Section Styling */
        .logs-section {
            background: var(--bg-secondary);
            color: var(--success);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            font-family: var(--font-family-mono);
            font-size: var(--text-sm);
            max-height: 300px;
            overflow-y: auto;
            margin-top: var(--space-8);
        }

        /* Quick Actions Bar */
        .quick-actions {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-top: var(--space-8);
        }

        .quick-actions h3 {
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .quick-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
        }

        .quick-button {
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--space-2) var(--space-4);
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .quick-button:hover {
            background: var(--color-primary-dark);
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .control-grid {
                grid-template-columns: 1fr;
            }

            .status-bar {
                flex-direction: column;
                align-items: flex-start;
            }

            .button-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body class="main-layout">
    <!-- Theme Toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span class="material-icons">brightness_6</span>
    </div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">üçΩÔ∏è Restaurant Network AI Platform</h1>
            <p class="hero-subtitle">Unified control center for 25,000+ restaurant network devices across Arby's, Buffalo Wild Wings, and Sonic Drive-In</p>
            
            <!-- Platform Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="device-count">25,147</div>
                    <div class="stat-label">Network Devices</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="ai-services">13</div>
                    <div class="stat-label">AI Services</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mcp-servers">6</div>
                    <div class="stat-label">MCP Servers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="restaurants">3</div>
                    <div class="stat-label">Restaurant Brands</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Service Status Overview -->
        <section class="card mt-8">
            <div class="card-header">
                <h2 class="card-title">üîß Platform Services Status</h2>
                <p class="card-subtitle">Real-time monitoring of all AI and network management services</p>
            </div>

            <!-- Service Status Grid -->
            <div class="grid grid-cols-3 gap-4">
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>Chat Copilot API</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>AutoGen Studio</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>AI Gateway</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>MCP Registry</span>
                </div>
                <div class="service-status status-warning">
                    <div class="status-dot"></div>
                    <span>vLLM Stack</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>FortiManager</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>Neo4j Database</span>
                </div>
                <div class="service-status status-offline">
                    <div class="status-dot"></div>
                    <span>Grafana</span>
                </div>
                <div class="service-status status-online">
                    <div class="status-dot"></div>
                    <span>Backup Sync</span>
                </div>
            </div>
        </section>

        <!-- Feature Grid -->
        <div class="section-grid">
            <!-- Restaurant Network Management -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">restaurant</span>
                </div>
                <h3 class="feature-title">Restaurant Network Management</h3>
                <p class="feature-description">
                    Monitor and manage 25,000+ devices across Arby's, Buffalo Wild Wings, and Sonic Drive-In networks with real-time FortiManager integration.
                </p>
                <div class="action-buttons">
                    <a href="/v1/restaurant/network" class="btn btn-primary">
                        <span class="material-icons">dashboard</span>
                        Network Dashboard
                    </a>
                    <a href="http://localhost:11030" class="btn-restaurant">
                        <span class="material-icons">mic</span>
                        Voice Interface
                    </a>
                </div>
            </div>

            <!-- AI Collaboration Hub -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">psychology</span>
                </div>
                <h3 class="feature-title">AI Collaboration Hub</h3>
                <p class="feature-description">
                    Multi-agent AI system with vLLM, Oobabooga, and KoboldCpp for advanced reasoning, coding, and creative tasks.
                </p>
                <div class="action-buttons">
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:3000" class="btn btn-primary">
                        <span class="material-icons">chat</span>
                        Chat Copilot
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11001" class="btn btn-secondary">
                        <span class="material-icons">groups</span>
                        AutoGen Studio
                    </a>
                </div>
            </div>

            <!-- MCP Server Integration -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">integration_instructions</span>
                </div>
                <h3 class="feature-title">MCP Server Integration</h3>
                <p class="feature-description">
                    Model Context Protocol servers for GitHub, Docker, Meraki, FortiManager, and API testing with secure credential management.
                </p>
                <div class="action-buttons">
                    <a href="http://localhost:9000/mcp" class="btn btn-primary">
                        <span class="material-icons">api</span>
                        MCP Registry
                    </a>
                    <a href="http://localhost:9000/mcp/health" class="btn btn-secondary">
                        <span class="material-icons">health_and_safety</span>
                        Health Check
                    </a>
                </div>
            </div>
        </div>

        <!-- Platform Overview Section -->
        <section class="card mt-8">
            <div class="card-header">
                <h2 class="card-title">üîç Complete AI Research Platform Stack</h2>
                <p class="card-subtitle">Comprehensive overview of all integrated services and capabilities</p>
            </div>
            
            <div class="grid grid-cols-2 gap-6">
                <div class="p-4 bg-secondary rounded-lg">
                    <h4 class="font-semibold text-primary mb-3">ü§ñ AI Services</h4>
                    <p class="text-sm text-secondary">OpenWebUI, Chat Copilot, Perplexica, SearchNG, AutoGen Studio, Magentic-One</p>
                </div>
                <div class="p-4 bg-secondary rounded-lg">
                    <h4 class="font-semibold text-primary mb-3">üèóÔ∏è GenAI Stack</h4>
                    <p class="text-sm text-secondary">Support Bot, Data Loader, PDF Reader, API Server, Frontend, Import Interface</p>
                </div>
                <div class="p-4 bg-secondary rounded-lg">
                    <h4 class="font-semibold text-primary mb-3">üíæ Database & Infrastructure</h4>
                    <p class="text-sm text-secondary">Neo4j, Qdrant Vector DB, RabbitMQ, PostgreSQL, VS Code Server, Port Scanner</p>
                </div>
                <div class="p-4 bg-secondary rounded-lg">
                    <h4 class="font-semibold text-primary mb-3">üåê Network & Management</h4>
                    <p class="text-sm text-secondary">Webhook Server, Nginx Gateway, Gateway Admin, Ollama API, ntopng Monitor</p>
                </div>
            </div>
        </section>

        <!-- Service Categories -->
        <div class="section-grid">

            <!-- AI Services Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">smart_toy</span>
                </div>
                <h3 class="feature-title">AI Services</h3>
                <p class="feature-description">
                    Complete suite of AI tools including OpenWebUI, Chat Copilot, Perplexica, SearchNG, AutoGen Studio, and Magentic-One for diverse AI workflows.
                </p>
                <div class="action-buttons">
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11880" target="_blank" class="btn btn-primary">
                        <span class="material-icons">psychology</span>
                        OpenWebUI
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:3000" target="_blank" class="btn btn-secondary">
                        <span class="material-icons">chat</span>
                        Chat Copilot
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11020" target="_blank" class="btn-restaurant" id="perplexica-btn">
                        <span class="material-icons">search</span>
                        Perplexica
                    </a>
                </div>
            </div>

            <!-- GenAI Stack Services Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">account_tree</span>
                </div>
                <h3 class="feature-title">GenAI Stack</h3>
                <p class="feature-description">
                    Knowledge graph AI applications with Neo4j integration, featuring support bot, data loader, PDF reader, and comprehensive API server.
                </p>
                <div class="action-buttons">
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:8505" target="_blank" class="btn btn-primary">
                        <span class="material-icons">dashboard</span>
                        Frontend
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:8501" target="_blank" class="btn btn-secondary">
                        <span class="material-icons">support_agent</span>
                        Support Bot
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:8502" target="_blank" class="btn-restaurant">
                        <span class="material-icons">upload</span>
                        Data Loader
                    </a>
                </div>
            </div>

            <!-- System Control Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">settings</span>
                </div>
                <h3 class="feature-title">System Control</h3>
                <p class="feature-description">
                    Platform management tools for monitoring AI provider status, switching between Azure and OpenAI, and managing Docker containers.
                </p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="executeCommand('switch-ai', 'status')">
                        <span class="material-icons">info</span>
                        AI Status
                    </button>
                    <button class="btn btn-secondary" onclick="executeCommand('switch-ai', 'azure')">
                        <span class="material-icons">swap_horiz</span>
                        Switch Azure
                    </button>
                    <button class="btn-restaurant" onclick="executeCommand('docker', 'ps')">
                        <span class="material-icons">view_list</span>
                        Docker Status
                    </button>
                </div>
            </div>

            <!-- Development Tools Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">code</span>
                </div>
                <h3 class="feature-title">Development Tools</h3>
                <p class="feature-description">
                    Complete development environment with VS Code Web, Grafana monitoring, health checks, and network tools for platform management.
                </p>
                <div class="action-buttons">
                    <a href="/vscode/login" target="_blank" class="btn btn-primary" id="vscode-btn">
                        <span class="material-icons">code</span>
                        VS Code Web
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11007" target="_blank" class="btn btn-secondary">
                        <span class="material-icons">monitor</span>
                        Grafana
                    </a>
                    <a href="/copilot/healthz" target="_blank" class="btn-restaurant">
                        <span class="material-icons">health_and_safety</span>
                        Health Check
                    </a>
                </div>
            </div>

            <!-- Infrastructure Management Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">router</span>
                </div>
                <h3 class="feature-title">Infrastructure Management</h3>
                <p class="feature-description">
                    Network and infrastructure tools including Fortinet management, Nginx gateway, Ollama API, and comprehensive monitoring solutions.
                </p>
                <div class="action-buttons">
                    <a href="/fortinet/" target="_blank" class="btn btn-primary">
                        <span class="material-icons">security</span>
                        Fortinet Mgmt
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11434" target="_blank" class="btn btn-secondary">
                        <span class="material-icons">api</span>
                        Ollama API
                    </a>
                    <button class="btn-restaurant" onclick="executeCommand('ping', 'ubuntuaicodeserver-1.tail5137b4.ts.net')">
                        <span class="material-icons">network_check</span>
                        Test Network
                    </button>
                </div>
            </div>

            <!-- Database & Storage Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">storage</span>
                </div>
                <h3 class="feature-title">Database & Storage</h3>
                <p class="feature-description">
                    Comprehensive data infrastructure with Neo4j graph database, Qdrant vector storage, PostgreSQL, and RabbitMQ message queuing.
                </p>
                <div class="action-buttons">
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:7474" target="_blank" class="btn btn-primary">
                        <span class="material-icons">account_tree</span>
                        Neo4j Database
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:6333/dashboard" target="_blank" class="btn btn-secondary">
                        <span class="material-icons">query_stats</span>
                        Qdrant Vector DB
                    </a>
                    <a href="https://ubuntuaicodeserver-1.tail5137b4.ts.net:11006" target="_blank" class="btn-restaurant">
                        <span class="material-icons">automation</span>
                        Windmill
                    </a>
                </div>
            </div>

            <!-- Service Management Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">build</span>
                </div>
                <h3 class="feature-title">Service Management</h3>
                <p class="feature-description">
                    Platform-wide service control with Docker container management, system restart capabilities, and comprehensive logging.
                </p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="executeCommand('docker', 'start-all')">
                        <span class="material-icons">play_arrow</span>
                        Start All
                    </button>
                    <button class="btn btn-secondary" onclick="executeCommand('docker', 'restart')">
                        <span class="material-icons">restart_alt</span>
                        Restart Services
                    </button>
                    <button class="btn-restaurant" onclick="showLogs()">
                        <span class="material-icons">article</span>
                        View Logs
                    </button>
                </div>
            </div>

            <!-- Application Management Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">apps</span>
                </div>
                <h3 class="feature-title">Application Management</h3>
                <p class="feature-description">
                    Platform application lifecycle management with automated deployment, testing, configuration, and removal capabilities.
                </p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="showAddApplicationDialog()">
                        <span class="material-icons">add_circle</span>
                        Add Application
                    </button>
                    <button class="btn btn-secondary" onclick="listApplications()">
                        <span class="material-icons">list</span>
                        List Applications
                    </button>
                    <button class="btn-restaurant" onclick="testNewApplication()">
                        <span class="material-icons">check_circle</span>
                        Test Application
                    </button>
                </div>
            </div>

            <!-- Deployment & Automation Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">rocket_launch</span>
                </div>
                <h3 class="feature-title">Deployment & Automation</h3>
                <p class="feature-description">
                    Automated deployment pipeline with webhook integration, manual deployment triggers, and comprehensive automation workflows.
                </p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="checkWebhookStatus()">
                        <span class="material-icons">webhook</span>
                        Webhook Status
                    </button>
                    <button class="btn btn-secondary" onclick="manualDeploy()">
                        <span class="material-icons">deploy</span>
                        Manual Deploy
                    </button>
                    <button class="btn-restaurant" onclick="startWebhookServer()">
                        <span class="material-icons">play_arrow</span>
                        Start Webhook
                    </button>
                </div>
            </div>

            <!-- Quick Actions Section -->
            <div class="feature-card">
                <div class="feature-icon">
                    <span class="material-icons">flash_on</span>
                </div>
                <h3 class="feature-title">Quick Actions</h3>
                <p class="feature-description">
                    Essential platform operations including comprehensive testing, configuration export, data backup, and dashboard access.
                </p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="testAllServices()">
                        <span class="material-icons">verified</span>
                        Test All
                    </button>
                    <button class="btn btn-secondary" onclick="exportConfig()">
                        <span class="material-icons">download</span>
                        Export Config
                    </button>
                    <button class="btn-restaurant" onclick="backupData()">
                        <span class="material-icons">backup</span>
                        Backup
                    </button>
                </div>
            </div>
        </div>

        <!-- System Logs -->
        <section class="card mt-8">
            <div class="card-header">
                <h2 class="card-title">üìã System Activity Logs</h2>
                <p class="card-subtitle">Real-time platform activity and command execution logs</p>
            </div>
            <div class="logs-section" id="logsOutput">
                <div>ü§ñ AI Research Platform Control Panel Ready</div>
                <div>üìä Status: All systems operational</div>
                <div>üîó Tailscale Domain: ubuntuaicodeserver-1.tail5137b4.ts.net</div>
                <div>‚ö° Click any button to execute commands...</div>
            </div>
        </section>

        <!-- Quick Actions Bar -->
        <section class="card mt-8">
            <div class="card-header">
                <h2 class="card-title">
                    <span class="material-icons">flash_on</span>
                    Frequently Used Actions
                </h2>
                <p class="card-subtitle">Quick access to the most commonly used platform features</p>
            </div>
            <div class="quick-buttons">
                <button class="quick-button" onclick="window.open('/', '_blank')">
                    <span class="material-icons">psychology</span>
                    OpenWebUI
                </button>
                <button class="quick-button" onclick="window.open('/copilot/', '_blank')">
                    <span class="material-icons">chat</span>
                    Chat Copilot
                </button>
                <button class="quick-button" onclick="window.open('/perplexica', '_blank')">
                    <span class="material-icons">search</span>
                    Perplexica
                </button>
                <button class="quick-button" onclick="executeCommand('switch-ai', 'status')">
                    <span class="material-icons">info</span>
                    AI Status
                </button>
                <button class="quick-button" onclick="refreshServices()">
                    <span class="material-icons">refresh</span>
                    Refresh
                </button>
                <button class="quick-button" onclick="window.open('https://github.com/kmransom56/AI_Research_Platform-_Tailscale', '_blank')">
                    <span class="material-icons">code</span>
                    GitHub
                </button>
                <button class="quick-button" onclick="window.open('/vscode/login', '_blank')">
                    <span class="material-icons">terminal</span>
                    VS Code
                </button>
            </div>
        </section>
    </main>

    <!-- JavaScript disabled to prevent URL rewriting issues -->
    <!--
    <script>
        /* =============================================
           Dynamic host patch
           ---------------------------------------------
           Anything in this file that still references the
           old hard-coded Tailscale domain will be rewritten
           on the client so the Control-Panel works
           regardless of which hostname it is served from.

           1.  All <a href="‚Ä¶"> links pointing at the old domain
               are rewritten when the DOM is ready.
           2.  All fetch() calls are transparently proxied so
               their URL host is replaced with the current one.
           3.  All window.open() calls are wrapped so external
               links are also rewritten.
        ============================================== */

        (function () {
            const LEGACY_HOST = 'ubuntuaicodeserver-1.tail5137b4.ts.net';
            const CURRENT_BASE = `${window.location.protocol}//${window.location.host}`;
            // NEW: Hosts that should be dynamically replaced with the current one
            const LOCAL_HOSTS = ['localhost', '127.0.0.1'];

            // Mapping of common container/native app ports to the reverse-proxy path
            // Update this table whenever you add a new service so the Control Panel
            // continues to work from outside the host machine.
            const PORT_TO_PATH = {
                // Core Platform Services
                '11000': '/copilot/',
                '11001': '/autogen/',
                '11003': '/magentic/',
                '11025': '/webhook/',
                '11007': '/grafana/',
                '11500': '/promptforge/',
                '11510': '/n8n/',
                '11010': '/portscanner/',
                '11880': '/openwebui/',
                '57081': '/vscode/',

                // Search & Knowledge Services  
                '11020': '/perplexica/',
                '11021': '/searxng/',
                '7474': '/neo4j/',
                '6333': '/qdrant/',

                // GenAI Stack Services
                '8505': '/genai-stack/',
                '8502': '/genai-stack/loader/',
                '8081': '/genai-stack/import/',
                '8501': '/genai-stack/bot/',
                '8503': '/genai-stack/pdf/',
                '8504': '/genai-stack/api/',

                // Infrastructure & Admin
                '11082': '/gateway-admin/',
                '11084': '/nginx-config/',
                '11434': '/ollama-api/',
                '11006': '/windmill/',
                '8888': '/ntopng/',
                '8080': '/nginx/',
                '15672': '/rabbitmq/',
                '5432': '/postgresql/',

                // Legacy/Compatibility
                '3000': '/copilot/',
                '3080': '/copilot/'
            };

            // --- Fix existing anchor tags -------------------------------------------------
            function rewriteAnchors() {
                document.querySelectorAll('a[href]').forEach(a => {
                    try {
                        const urlObj = new URL(a.href, window.location.href);
                        const local = LOCAL_HOSTS.includes(urlObj.hostname);
                        const legacy = urlObj.hostname === LEGACY_HOST;
                        if (!local && !legacy) return;

                        // Only rewrite legacy Tailscale domain links
                        if (legacy) {
                            // Map known ports to proxy paths when possible
                            const mapped = PORT_TO_PATH[urlObj.port];
                            if (mapped) {
                                a.href = `${CURRENT_BASE}${mapped}`;
                            } else {
                                a.href = urlObj.toString();
                            }
                        }
                        // For localhost/127.0.0.1, replace with current IP but preserve port for direct access
                        else if (local) {
                            a.href = `http://${window.location.hostname}:${urlObj.port}${urlObj.pathname}${urlObj.search}${urlObj.hash}`;
                        }
                    } catch (_) {/* ignore malformed */ }
                });
            }

            // Run once DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', rewriteAnchors);
            } else {
                rewriteAnchors();
            }

            // --- Patch global fetch -------------------------------------------------------
            const _fetch = window.fetch.bind(window);
            window.fetch = function (input, init) {
                if (typeof input === 'string' && input.includes(LEGACY_HOST)) {
                    const urlObj = new URL(input);
                    if (urlObj.hostname !== window.location.hostname) {
                        input = `${CURRENT_BASE}${urlObj.pathname}${urlObj.search}${urlObj.hash}`;
                    }
                } else if (typeof input === 'string' && LOCAL_HOSTS.some(h => input.includes(`://${h}`))) {
                    try {
                        const urlObj = new URL(input);
                        if (LOCAL_HOSTS.includes(urlObj.hostname)) {
                            input = `${urlObj.protocol}//${window.location.hostname}${urlObj.port ? ':' + urlObj.port : ''}${urlObj.pathname}${urlObj.search}${urlObj.hash}`;
                        }
                    } catch (_) { /* ignore malformed */ }
                } else if (input instanceof Request && input.url.includes(LEGACY_HOST)) {
                    const urlObj = new URL(input.url);
                    if (urlObj.hostname !== window.location.hostname) {
                        input = new Request(`${CURRENT_BASE}${urlObj.pathname}${urlObj.search}${urlObj.hash}`, input);
                    }
                } else if (input instanceof Request && LOCAL_HOSTS.some(h => input.url.includes(`://${h}`))) {
                    try {
                        const urlObj = new URL(input.url);
                        if (LOCAL_HOSTS.includes(urlObj.hostname)) {
                            input = new Request(`${urlObj.protocol}//${window.location.hostname}${urlObj.port ? ':' + urlObj.port : ''}${urlObj.pathname}${urlObj.search}${urlObj.hash}`, input);
                        }
                    } catch (_) { /* ignore malformed */ }
                }
                return _fetch(input, init);
            };

            // --- Patch window.open --------------------------------------------------------
            const _open = window.open.bind(window);
            window.open = function (url, target, features) {
                if (typeof url === 'string' && url.includes(LEGACY_HOST)) {
                    const urlObj = new URL(url);
                    if (urlObj.hostname !== window.location.hostname) {
                        url = `${CURRENT_BASE}${urlObj.pathname}${urlObj.search}${urlObj.hash}`;
                    }
                } else if (typeof url === 'string' && LOCAL_HOSTS.some(h => url.includes(`://${h}`))) {
                    try {
                        const urlObj = new URL(url);
                        if (LOCAL_HOSTS.includes(urlObj.hostname)) {
                            url = `${urlObj.protocol}//${window.location.hostname}${urlObj.port ? ':' + urlObj.port : ''}${urlObj.pathname}${urlObj.search}${urlObj.hash}`;
                        }
                    } catch (_) {/* ignore malformed */ }
                }
                return _open(url, target, features);
            };

            // Run once DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', rewriteAnchors);
            } else {
                rewriteAnchors();
            }
        })();

        // Service status tracking
        let serviceStatus = {
            openwebui: 'active',
            chatcopilot: 'active',
            perplexica: 'active',
            searchng: 'active',
            provider: 'openai'
        };

        // Log output function
        function logOutput(message, type = 'info') {
            const logsDiv = document.getElementById('logsOutput');
            const timestamp = new Date().toLocaleTimeString();
            const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : 'üìù';
            logsDiv.innerHTML += `<div>[${timestamp}] ${icon} ${message}</div>`;
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }

        // Execute command function
        async function executeCommand(service, action) {
            logOutput(`Executing ${service} ${action}...`, 'info');

            try {
                switch (service) {
                    case 'switch-ai':
                        await handleAISwitch(action);
                        break;
                    case 'docker':
                        await handleDockerCommand(action);
                        break;
                    case 'ping':
                        await handlePing(action);
                        break;
                    default:
                        logOutput(`Unknown service: ${service}`, 'error');
                }
            } catch (error) {
                logOutput(`Error: ${error.message}`, 'error');
            }
        }

        // Handle AI provider switching
        async function handleAISwitch(action) {
            const messages = {
                'status': 'Checking AI provider status...',
                'azure': 'Switching to Azure OpenAI...',
                'openai': 'Switching to OpenAI...'
            };

            logOutput(messages[action] || 'Unknown AI action', 'info');

            try {
                if (action === 'status') {
                    const response = await fetch('/copilot/api/systemcontrol/status', {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        logOutput(`üìä Current Provider: ${data.provider.toUpperCase()}`, 'info');
                        logOutput('üè• Backend: Healthy', 'success');
                        logOutput(`üîó Tailscale IP: ${data.tailscaleIp}`, 'info');

                        // Update service status
                        data.services.forEach(service => {
                            logOutput(`‚úÖ ${service.name}: ${service.status}`, 'success');
                        });

                        serviceStatus.provider = data.provider;
                        updateStatusIndicator();
                    } else {
                        logOutput('‚ùå Failed to get status from backend', 'error');
                    }
                } else {
                    const response = await fetch('/copilot/api/systemcontrol/switch-provider', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ provider: action })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        serviceStatus.provider = action;
                        logOutput(`‚úÖ ${data.message}`, 'success');
                        if (data.output) {
                            logOutput(`üìã Output: ${data.output}`, 'info');
                        }
                        updateStatusIndicator();
                    } else {
                        const error = await response.json();
                        logOutput(`‚ùå Failed to switch provider: ${error.error}`, 'error');
                    }
                }
            } catch (error) {
                logOutput(`‚ùå Network error: ${error.message}`, 'error');
                // Fallback to simulation for demo
                setTimeout(() => {
                    if (action === 'azure') {
                        serviceStatus.provider = 'azure';
                        logOutput('‚úÖ Simulated switch to Azure OpenAI', 'success');
                    } else if (action === 'openai') {
                        serviceStatus.provider = 'openai';
                        logOutput('‚úÖ Simulated switch to OpenAI', 'success');
                    }
                    updateStatusIndicator();
                }, 500);
            }
        }

        // Handle Docker commands
        async function handleDockerCommand(action) {
            const messages = {
                'ps': 'Checking Docker container status...',
                'start-all': 'Starting all Docker services...',
                'restart': 'Restarting Docker services...',
                'stop-all': 'Stopping all Docker services...'
            };

            logOutput(messages[action] || 'Unknown Docker action', 'info');

            try {
                const response = await fetch('/copilot/api/systemcontrol/docker', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: action === 'ps' ? 'status' : action })
                });

                if (response.ok) {
                    const data = await response.json();
                    logOutput(`‚úÖ Docker ${data.action} completed successfully`, 'success');
                    if (data.output) {
                        const lines = data.output.split('\n').filter(line => line.trim());
                        lines.forEach(line => {
                            if (line.includes('Up') || line.includes('Exited')) {
                                logOutput(`üê≥ ${line}`, 'info');
                            }
                        });
                    }
                } else {
                    const error = await response.json();
                    logOutput(`‚ùå Docker command failed: ${error.error}`, 'error');
                }
            } catch (error) {
                logOutput(`‚ùå Network error: ${error.message}`, 'error');
                // Fallback to simulation
                setTimeout(() => {
                    if (action === 'ps') {
                        logOutput('üê≥ perplexica-app-1: Up 45 minutes', 'success');
                        logOutput('üê≥ perplexica-searxng-1: Up 45 minutes (healthy)', 'success');
                        logOutput('üê≥ fortinet-manager_frontend_1: Up 45 minutes', 'success');
                        logOutput('üê≥ port-scanner-tailscale: Up 45 minutes', 'success');
                    } else {
                        logOutput(`‚úÖ Simulated Docker ${action} completed`, 'success');
                    }
                }, 1000);
            }
        }

        // Handle network ping
        async function handlePing(target) {
            logOutput(`üèì Pinging ${target}...`, 'info');

            setTimeout(() => {
                logOutput(`‚úÖ ${target} is reachable`, 'success');
                logOutput('üìä Response time: ~5ms', 'info');
                logOutput('üåê Tailscale network: Operational', 'success');
            }, 1000);
        }

        // Test all services
        async function testAllServices() {
            logOutput('üß™ Testing all AI Research Platform services...', 'info');

            try {
                const response = await fetch('/copilot/api/systemcontrol/test-services', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (response.ok) {
                    const data = await response.json();
                    data.services.forEach(service => {
                        const icon = service.status === 'accessible' ? '‚úÖ' : '‚ùå';
                        const type = service.status === 'accessible' ? 'success' : 'error';
                        logOutput(`${icon} ${service.name}: ${service.status}`, type);
                        if (service.error) {
                            logOutput(`   Error: ${service.error}`, 'error');
                        }
                    });

                    const allHealthy = data.services.every(s => s.status === 'accessible');
                    if (allHealthy) {
                        logOutput('üéâ All services are operational!', 'success');
                    } else {
                        logOutput('‚ö†Ô∏è Some services have issues', 'warning');
                    }
                } else {
                    const error = await response.json();
                    logOutput(`‚ùå Service test failed: ${error.error}`, 'error');
                }
            } catch (error) {
                logOutput(`‚ùå Network error: ${error.message}`, 'error');
                // Fallback to simulation
                const services = [
                    { name: 'OpenWebUI', url: '/openwebui' },
                    { name: 'Chat Copilot', url: '/copilot/' },
                    { name: 'Perplexica', url: '/perplexica' },
                    { name: 'SearchNG', url: '/searxng/' },
                    { name: 'Health Check', url: '/copilot/healthz' }
                ];

                for (let i = 0; i < services.length; i++) {
                    setTimeout(() => {
                        logOutput(`‚úÖ ${services[i].name}: Simulated test passed`, 'success');
                        if (i === services.length - 1) {
                            logOutput('üéâ All simulated tests completed!', 'success');
                        }
                    }, (i + 1) * 300);
                }
            }
        }

        // Refresh service status
        function refreshServices() {
            logOutput('üîÑ Refreshing service status...', 'info');

            setTimeout(() => {
                logOutput('‚úÖ Status refresh completed', 'success');
                logOutput('üìä All services: Operational', 'success');
                updateStatusIndicator();
            }, 1000);
        }

        // Update status indicators
        function updateStatusIndicator() {
            // Update provider status in the status bar
            const statusItems = document.querySelectorAll('.status-item');
            statusItems.forEach(item => {
                if (item.textContent.includes('Provider:')) {
                    item.innerHTML = `
                        <div class="status-indicator status-active"></div>
                        <span>Provider: ${serviceStatus.provider.toUpperCase()}</span>
                    `;
                }
            });
        }

        // Show network information
        function showNetworkInfo() {
            logOutput('üåê Network Information:', 'info');
            logOutput('üìç Tailscale IP: 100.123.10.72', 'info');
            logOutput('üîó Network Type: Tailscale VPN', 'info');
            logOutput('üåç Access: Global (via Tailscale)', 'info');
            logOutput('üîí Security: Encrypted mesh network', 'info');
        }

        // Show logs
        function showLogs() {
            logOutput('üìã Recent system activity:', 'info');
            logOutput('üïê 2025-06-14 09:45:12 - Chat Copilot: Backend healthy', 'info');
            logOutput('üïê 2025-06-14 09:44:58 - Perplexica: AI search ready', 'info');
            logOutput('üïê 2025-06-14 09:44:45 - OpenWebUI: Connected', 'info');
        }

        // Export configuration
        function exportConfig() {
            logOutput('üì¶ Exporting configuration...', 'info');

            const config = {
                tailscale_ip: '100.123.10.72',
                services: serviceStatus,
                timestamp: new Date().toISOString(),
                endpoints: {
                    openwebui: '/openwebui',
                    chatcopilot: '/copilot/',
                    perplexica: '/perplexica',
                    searchng: '/searxng/'
                }
            };

            setTimeout(() => {
                logOutput('‚úÖ Configuration exported successfully', 'success');
                logOutput('üíæ File: ai-platform-config.json', 'info');
            }, 800);
        }

        // Backup data
        function backupData() {
            logOutput('üíæ Creating system backup...', 'info');

            setTimeout(() => {
                logOutput('‚úÖ Backup completed successfully', 'success');
                logOutput('üìÅ Location: /home/keith/backups/', 'info');
                logOutput('üóìÔ∏è Timestamp: ' + new Date().toLocaleString(), 'info');
            }, 1200);
        }

        // --------------------------------------------------
        // Application-management helpers (Add / List / Test / Remove)
        // --------------------------------------------------

        function showAddApplicationDialog() {
            logOutput('üì± Opening Add Application dialog...', 'info');

            const name = prompt('Application Name (e.g., "Grafana"):');
            if (!name) return;

            const port = prompt('Application Port (11000-12000 range or "auto"):') || 'auto';
            if (port !== 'auto' && (isNaN(port) || port < 11000 || port > 12000)) {
                logOutput('‚ùå Invalid port. Must be between 11000-12000 or "auto"', 'error');
                return;
            }

            const path = prompt('URL Path (omit or "auto" for automatic path):') || 'auto';
            if (path !== 'auto' && !path.startsWith('/')) {
                logOutput('‚ùå Invalid path. Must start with /', 'error');
                return;
            }

            const description = prompt('Description:') || '';
            const category = prompt('Category (ai/dev/network/api):') || 'ai';
            const dockerImage = prompt('Docker Image (optional):') || '';

            // Build command string that the add-application script understands
            let cmd = `./scripts/platform-management/add-application.sh --name "${name}" --description "${description}" --category ${category}`;
            if (port) cmd += ` --port ${port}`;
            if (path) cmd += ` --path ${path}`;
            if (dockerImage) cmd += ` --docker-image "${dockerImage}"`;

            logOutput('üöÄ Generated command:', 'info');
            logOutput(cmd, 'info');
            logOutput('üìã Copy this command and run it in the terminal', 'info');

            if (navigator.clipboard) {
                navigator.clipboard.writeText(cmd).then(() => {
                    logOutput('üìã Command copied to clipboard!', 'success');
                });
            }
        }

        function listApplications() {
            logOutput('üìã Listing current applications...', 'info');

            fetch('/copilot/api/systemcontrol/applications')
                .then(r => r.ok ? r.json() : Promise.reject())
                .then(data => {
                    data.forEach(app => logOutput(`‚Ä¢ ${app.name} (${app.port})`, 'info'));
                })
                .catch(() => {
                    // fallback demo list
                    ['OpenWebUI', 'Chat Copilot', 'Ollama', 'Windmill'].forEach(a => logOutput(`‚Ä¢ ${a}`, 'info'));
                });
        }

        function testNewApplication() {
            const path = prompt('Enter application path to test (e.g., "/windmill"):');
            if (!path) return;

            logOutput(`üîç Testing application at ${path}...`, 'info');

            fetch(path, { method: 'HEAD' })
                .then(() => logOutput(`‚úÖ ${path} is reachable`, 'success'))
                .catch(() => logOutput(`‚ùå ${path} is not reachable`, 'error'));
        }

        function removeApplication() {
            const name = prompt('Application name to remove:');
            if (!name) return;

            logOutput(`üóëÔ∏è  Manual steps required to remove ${name}: edit nginx, docker compose, dashboards`, 'warning');
        }

        // Check external services status
        async function checkExternalServices() {
            const services = [
                { id: 'perplexica-btn', url: '/perplexica', name: 'Perplexica' },
                { id: 'searxng-btn', url: '/searxng/', name: 'SearXNG' },
                { id: 'vscode-btn', url: '/vscode/login', name: 'VS Code Web' }
            ];

            for (const service of services) {
                try {
                    const response = await fetch(service.url, {
                        method: 'HEAD',
                        mode: 'no-cors',
                        timeout: 3000
                    });
                    // If we get here without error, service is likely up
                    document.getElementById(service.id).style.opacity = '1.0';
                    document.getElementById(service.id).title = `${service.name} - Available`;
                } catch (error) {
                    // Service is likely down
                    document.getElementById(service.id).style.opacity = '0.5';
                    document.getElementById(service.id).title = `${service.name} - Not Available (External Service)`;
                    const icon = document.getElementById(service.id).querySelector('.material-icons');
                    if (icon) {
                        icon.style.color = '#ccc';
                    }
                }
            }
        }

        // Run status check on page load
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(checkExternalServices, 1000);
        });

        // Open full dashboard
        function openDashboard() {
            window.open('/copilot/applications.html', '_blank');
            logOutput('üöÄ Opening full applications dashboard...', 'info');
        }

        // Webhook management functions
        async function checkWebhookStatus() {
            logOutput('üîç Checking webhook server status...', 'info');

            try {
                const response = await fetch('/webhook/health', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (response.ok) {
                    const data = await response.json();
                    logOutput('‚úÖ Webhook server is running', 'success');
                    logOutput(`üìä Uptime: ${Math.floor(data.uptime / 60)} minutes`, 'info');
                    logOutput(`üïê Status check: ${data.timestamp}`, 'info');

                    // Get detailed status
                    const statusResponse = await fetch('/webhook/status');
                    if (statusResponse.ok) {
                        const statusData = await statusResponse.json();
                        logOutput(`üìã Recent webhook activity:`, 'info');
                        statusData.recentLogs.slice(-3).forEach(log => {
                            logOutput(`   ${log}`, 'info');
                        });
                    }
                } else {
                    logOutput('‚ùå Webhook server not responding', 'error');
                }
            } catch (error) {
                logOutput('‚ùå Webhook server is not running', 'error');
                logOutput('üí° Use "Start Webhook" button to launch it', 'info');
            }
        }

        async function manualDeploy() {
            logOutput('üöÄ Triggering manual deployment...', 'info');

            try {
                const response = await fetch('/webhook/deploy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (response.ok) {
                    const data = await response.json();
                    logOutput('‚úÖ Manual deployment started successfully', 'success');
                    logOutput('üìã Check deployment logs for progress', 'info');

                    // Monitor deployment progress
                    setTimeout(checkDeploymentStatus, 5000);
                } else {
                    const error = await response.json();
                    logOutput(`‚ùå Deployment failed: ${error.error}`, 'error');
                }
            } catch (error) {
                logOutput('‚ùå Could not connect to webhook server', 'error');
                logOutput('üí° Ensure webhook server is running first', 'info');
            }
        }

        async function startWebhookServer() {
            logOutput('üöÄ Starting webhook server...', 'info');

            try {
                // First check if it's already running
                const healthCheck = await fetch('/webhook/health').catch(() => null);
                if (healthCheck && healthCheck.ok) {
                    logOutput('‚ö†Ô∏è Webhook server is already running', 'warning');
                    return;
                }

                // Start the webhook server
                const response = await fetch('/copilot/api/systemcontrol/docker', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'start-webhook',
                        command: 'cd /home/keith/chat-copilot && nohup node webhook-server.js > webhook.log 2>&1 &'
                    })
                });

                if (response.ok) {
                    logOutput('‚úÖ Webhook server start command sent', 'success');
                    logOutput('üîÑ Checking server status in 3 seconds...', 'info');
                    setTimeout(checkWebhookStatus, 3000);
                } else {
                    logOutput('‚ùå Failed to start webhook server', 'error');
                }
            } catch (error) {
                logOutput('‚ùå Error starting webhook server', 'error');
                logOutput('üí° Try running manually: node webhook-server.js', 'info');
            }
        }

        async function stopWebhookServer() {
            logOutput('üõë Stopping webhook server...', 'info');

            try {
                const response = await fetch('/copilot/api/systemcontrol/docker', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'stop-webhook',
                        command: 'pkill -f "node.*webhook-server.js"'
                    })
                });

                if (response.ok) {
                    logOutput('‚úÖ Webhook server stop command sent', 'success');
                    logOutput('üîÑ Verifying shutdown...', 'info');
                    setTimeout(() => {
                        fetch('/webhook/health')
                            .then(() => logOutput('‚ö†Ô∏è Server may still be running', 'warning'))
                            .catch(() => logOutput('‚úÖ Webhook server stopped successfully', 'success'));
                    }, 2000);
                } else {
                    logOutput('‚ùå Failed to stop webhook server', 'error');
                }
            } catch (error) {
                logOutput('‚ùå Error stopping webhook server', 'error');
            }
        }

        async function checkDeploymentStatus() {
            try {
                const response = await fetch('/webhook/status');
                if (response.ok) {
                    const data = await response.json();
                    const recentLogs = data.recentLogs.slice(-2);
                    recentLogs.forEach(log => {
                        if (log.includes('Deployment completed') || log.includes('‚úÖ') || log.includes('‚ùå')) {
                            logOutput(`üìã ${log}`, log.includes('‚ùå') ? 'error' : 'success');
                        }
                    });
                }
            } catch (error) {
                logOutput('‚ö†Ô∏è Could not check deployment status', 'warning');
            }
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function () {
            logOutput('üéØ AI Research Platform Control Panel Initialized', 'success');
            logOutput('üîß All functions ready for use', 'info');
            updateStatusIndicator();
        });
    </script>
</body>

</html>